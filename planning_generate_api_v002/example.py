data_meatinfo1 = {
    "name": "11111.gef",
    "omics": "scRNA_seq",
    "wfTag": ""
}

data_meatinfo2 = {
    "name": "11111.h5ad",
    "omics": "STOmics",
}

data_meatinfo3 = {
    "name": "fastq文件",
    "omics": "scRNA-seq",
}

auto_fill_parameters_data= {
  "records": [
{
    "viewType": "",
    "subnet": "",
    "id": "26412c7d89bf48bcb0916f885ae0ed8c",
    "projectId": "P1600787473158537217",
    "status": "0",
    "delFlag": "0",
    "processId": "",
    "fileExtension": "",
    "env": "",
    "parentId": "1780858330605449217",
    "createTime": "2025-05-29 16:39:49",
    "menuLabel": "",
    "downloadType": "",
    "menuId": "26412c7d89bf48bcb0916f885ae0ed8c",
    "menuStatus": "0",
    "menuSort": "1",
    "dataType": "1",
    "searchName": "2",
    "systemType": "0",
    "menuPath": "/Files/RawData",
    "menuName": "2"
},
  {
    "checkCode": "429167780",
    "wfTag": "Stereo_Miner_Clustering",
    "commonTag": "un_is_send_cnsa",
    "barcodeLen": "",
    "subnet": "hpc",
    "refrenece": "",
    "memo": "",
    "tissue": "",
    "pid": "",
    "path": "/zfsms3/ST_STOMICS/STOmics_cloud/odms/test/dcs_cloud/P1871461072416366593/Files/ResultData/Workflow/W202506120003255/stdout",
    "sampleRandomNo": "",
    "zone": "st",
    "id": "899cd30a29024e75a8e79b9f05ac6ad5",
    "tag": "",
    "umiLocation": "",
    "batchNo": "WF2025061210187",
    "mapping": "stdout",
    "sampleId": "123",
    "wfName": "",
    "bussinessName": "时空workflow",
    "sampleNum": "",
    "sampleName": "",
    "sampleType": "",
    "sampleIntegrity": "",
    "resultNote": "",
    "sequenceType": "",
    "libraryNum": "",
    "slide": "",
    "barcode": "",
    "sequencePlatform": "",
    "basicQualityValue": "",
    "q30": "",
    "q20": "",
    "readNum": "",
    "baseNum": "",
    "estErr": "",
    "srcFilePath": "/zdsms1/ST_NOTEBOOK/P20Z10200N0039/workflow/test/cromwell-executions-volcano/Hello/12a1d31f-34b8-47e8-b115-699bd246e0d3/call-sayHello/execution/1111.fq.gz",
    "umiStartPos": "",
    "omicsType": "",
    "omics": "",
    "fileSize": "247",
    "name": "1111.h5ad",
    "fastqType": "",
    "projectId": "P1871461072416366593",
    "status": "0",
    "metadataType": 0,
    "barcodeStart": "",
    "delFlag": "0",
    "sid": "1933091680321863682",
    "umiLen": "",
    "fileStatus": "0",
    "processId": "Hello_multiple",
    "fileExtension": "stdout",
    "bussinessCode": "202406170032",
    "chipId": "",
    "lane": "",
    "chipCategory": "",
    "creator": "hujiaming",
    "dyeType": "",
    "env": "",
    "parentId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "createTime": "2025-06-12 17:23:58",
    "species": "",
    "readLen": "",
    "taskId": "W202506120003255",
    "downloadType": "0",
    "metadataId": "47f02fbafece421a92d8bc2bce27c85c",
    "metadataMenuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "projectName": "",
    "businessType": "",
    "projectType": "",
    "productType": "",
    "chipSpecs": "",
    "experimentProcess": "",
    "isMicroscopeFile": "",
    "qcResultFile": "",
    "imageToolType": "",
    "manufacture": "",
    "imageQcVersion": "",
    "stereoResepSwitch": "",
    "iprVersion": "",
    "processVersion": "1.0.0",
    "splitCount": "",
    "cbLength": "",
    "cbStart": "",
    "libraryType": "",
    "subProject": "",
    "snId": "",
    "menuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "menuStatus": "0",
    "menuSort": "1",
    "dataType": "0",
    "searchName": "stdout",
    "menuPath": "/Files/ResultData/Workflow/W202506120003255",
    "trackCrossQcPassFlag": "",
    "stitchedImage": "",
    "menuName": "W202506120003255",
    "linkType": "2"
  },
  {
    "checkCode": "3685340396",
    "commonTag": "un_is_send_cnsa",
    "barcodeLen": "",
    "subnet": "hpc",
    "refrenece": "",
    "memo": "",
    "tissue": "",
    "pid": "",
    "path": "/zfsms3/ST_STOMICS/STOmics_cloud/odms/test/dcs_cloud/P1871461072416366593/Files/ResultData/Workflow/W202506120003255/input.json",
    "sampleRandomNo": "",
    "zone": "st",
    "id": "11550f6b07ef4fcf83ee5cea4f091c02",
    "tag": "",
    "umiLocation": "",
    "batchNo": "WF2025061210187",
    "mapping": "input.json",
    "sampleId": "123",
    "wfName": "",
    "wfTag": "Stereo_Miner_Clustering",
    "bussinessName": "时空workflow",
    "sampleNum": "",
    "sampleName": "",
    "sampleType": "",
    "sampleIntegrity": "",
    "resultNote": "",
    "sequenceType": "",
    "libraryNum": "",
    "slide": "",
    "barcode": "",
    "sequencePlatform": "",
    "basicQualityValue": "",
    "q30": "",
    "q20": "",
    "readNum": "",
    "baseNum": "",
    "estErr": "",
    "srcFilePath": "/zdsms1/ST_NOTEBOOK/P20Z10200N0039/workflow/test/param/users/st_stomics/P20Z10200N0039/WF2025061210187/1933091680321863682/input.json",
    "umiStartPos": "",
    "omicsType": "",
    "omics": "",
    "fileSize": "136",
    "name": "1111.h5ad",
    "fastqType": "",
    "projectId": "P1871461072416366593",
    "status": "0",
    "metadataType": 0,
    "barcodeStart": "",
    "delFlag": "0",
    "sid": "1933091680321863682",
    "umiLen": "",
    "fileStatus": "0",
    "processId": "Hello_multiple",
    "fileExtension": "json",
    "bussinessCode": "202406170032",
    "chipId": "",
    "lane": "",
    "chipCategory": "",
    "creator": "hujiaming",
    "dyeType": "",
    "env": "",
    "parentId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "createTime": "2025-06-12 17:23:58",
    "species": "",
    "readLen": "",
    "taskId": "W202506120003255",
    "downloadType": "0",
    "metadataId": "f9c270ac5a204094934cf7edaaeb9e2a",
    "metadataMenuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "projectName": "",
    "businessType": "",
    "projectType": "",
    "productType": "",
    "chipSpecs": "",
    "experimentProcess": "",
    "isMicroscopeFile": "",
    "qcResultFile": "",
    "imageToolType": "",
    "manufacture": "",
    "imageQcVersion": "",
    "stereoResepSwitch": "",
    "iprVersion": "",
    "processVersion": "1.0.0",
    "splitCount": "",
    "cbLength": "",
    "cbStart": "",
    "libraryType": "",
    "subProject": "",
    "snId": "",
    "menuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "menuStatus": "0",
    "menuSort": "1",
    "dataType": "0",
    "searchName": "input.json",
    "menuPath": "/Files/ResultData/Workflow/W202506120003255",
    "trackCrossQcPassFlag": "",
    "stitchedImage": "",
    "menuName": "W202506120003255",
    "linkType": "2"
  }
]
}
auto_fill_parameters_data_rna= {
  "records": [
  {
    "checkCode": "429167780",
    "wfTag": "Stereo_Miner_Clustering",
    "commonTag": "un_is_send_cnsa",
    "barcodeLen": "",
    "subnet": "hpc",
    "refrenece": "",
    "memo": "",
    "tissue": "",
    "pid": "",
    "path": "/zfsms3/ST_STOMICS/STOmics_cloud/odms/test/dcs_cloud/P1871461072416366593/Files/ResultData/Workflow/W202506120003255/stdout",
    "sampleRandomNo": "",
    "zone": "st",
    "id": "899cd30a29024e75a8e79b9f05ac6ad5",
    "tag": "",
    "umiLocation": "",
    "batchNo": "WF2025061210187",
    "mapping": "stdout",
    "sampleId": "123",
    "wfName": "",
    "bussinessName": "时空workflow",
    "sampleNum": "",
    "sampleName": "",
    "sampleType": "",
    "sampleIntegrity": "",
    "resultNote": "",
    "sequenceType": "",
    "libraryNum": "",
    "slide": "",
    "barcode": "",
    "sequencePlatform": "",
    "basicQualityValue": "",
    "q30": "",
    "q20": "",
    "readNum": "",
    "baseNum": "",
    "estErr": "",
    "srcFilePath": "/zdsms1/ST_NOTEBOOK/P20Z10200N0039/workflow/test/cromwell-executions-volcano/Hello/12a1d31f-34b8-47e8-b115-699bd246e0d3/call-sayHello/execution/1111.fq.gz",
    "umiStartPos": "",
    "omicsType": "",
    "omics": "",
    "fileSize": "247",
    "name": "1111.h5ad",
    "fastqType": "",
    "projectId": "P1871461072416366593",
    "status": "0",
    "metadataType": 0,
    "barcodeStart": "",
    "delFlag": "0",
    "sid": "1933091680321863682",
    "umiLen": "",
    "fileStatus": "0",
    "processId": "Hello_multiple",
    "fileExtension": "stdout",
    "bussinessCode": "202406170032",
    "chipId": "",
    "lane": "",
    "chipCategory": "",
    "creator": "hujiaming",
    "dyeType": "",
    "env": "",
    "parentId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "createTime": "2025-06-12 17:23:58",
    "species": "",
    "readLen": "",
    "taskId": "W202506120003255",
    "downloadType": "0",
    "metadataId": "47f02fbafece421a92d8bc2bce27c85c",
    "metadataMenuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "projectName": "",
    "businessType": "",
    "projectType": "",
    "productType": "",
    "chipSpecs": "",
    "experimentProcess": "",
    "isMicroscopeFile": "",
    "qcResultFile": "",
    "imageToolType": "",
    "manufacture": "",
    "imageQcVersion": "",
    "stereoResepSwitch": "",
    "iprVersion": "",
    "processVersion": "1.0.0",
    "splitCount": "",
    "cbLength": "",
    "cbStart": "",
    "libraryType": "",
    "subProject": "",
    "snId": "",
    "menuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "menuStatus": "0",
    "menuSort": "1",
    "dataType": "0",
    "searchName": "stdout",
    "menuPath": "/Files/ResultData/Workflow/W202506120003255",
    "trackCrossQcPassFlag": "",
    "stitchedImage": "",
    "menuName": "W202506120003255",
    "linkType": "2"
  },
  {
    "checkCode": "3685340396",
    "commonTag": "un_is_send_cnsa",
    "barcodeLen": "",
    "subnet": "hpc",
    "refrenece": "",
    "memo": "",
    "tissue": "",
    "pid": "",
    "path": "/zfsms3/ST_STOMICS/STOmics_cloud/odms/test/dcs_cloud/P1871461072416366593/Files/ResultData/Workflow/W202506120003255/input.json",
    "sampleRandomNo": "",
    "zone": "st",
    "id": "11550f6b07ef4fcf83ee5cea4f091c02",
    "tag": "",
    "umiLocation": "",
    "batchNo": "WF2025061210187",
    "mapping": "input.json",
    "sampleId": "123",
    "wfName": "",
    "wfTag": "Stereo_Miner_Clustering",
    "bussinessName": "时空workflow",
    "sampleNum": "",
    "sampleName": "",
    "sampleType": "",
    "sampleIntegrity": "",
    "resultNote": "",
    "sequenceType": "",
    "libraryNum": "",
    "slide": "",
    "barcode": "",
    "sequencePlatform": "",
    "basicQualityValue": "",
    "q30": "",
    "q20": "",
    "readNum": "",
    "baseNum": "",
    "estErr": "",
    "srcFilePath": "/zdsms1/ST_NOTEBOOK/P20Z10200N0039/workflow/test/param/users/st_stomics/P20Z10200N0039/WF2025061210187/1933091680321863682/input.json",
    "umiStartPos": "",
    "omicsType": "",
    "omics": "",
    "fileSize": "136",
    "name": "1111.h5ad",
    "fastqType": "",
    "projectId": "P1871461072416366593",
    "status": "0",
    "metadataType": 0,
    "barcodeStart": "",
    "delFlag": "0",
    "sid": "1933091680321863682",
    "umiLen": "",
    "fileStatus": "0",
    "processId": "Hello_multiple",
    "fileExtension": "json",
    "bussinessCode": "202406170032",
    "chipId": "",
    "lane": "",
    "chipCategory": "",
    "creator": "hujiaming",
    "dyeType": "",
    "env": "",
    "parentId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "createTime": "2025-06-12 17:23:58",
    "species": "",
    "readLen": "",
    "taskId": "W202506120003255",
    "downloadType": "0",
    "metadataId": "f9c270ac5a204094934cf7edaaeb9e2a",
    "metadataMenuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "projectName": "",
    "businessType": "",
    "projectType": "",
    "productType": "",
    "chipSpecs": "",
    "experimentProcess": "",
    "isMicroscopeFile": "",
    "qcResultFile": "",
    "imageToolType": "",
    "manufacture": "",
    "imageQcVersion": "",
    "stereoResepSwitch": "",
    "iprVersion": "",
    "processVersion": "1.0.0",
    "splitCount": "",
    "cbLength": "",
    "cbStart": "",
    "libraryType": "",
    "subProject": "",
    "snId": "",
    "menuId": "ce0c33632fa84a6fb1c265e8fe31a189",
    "menuStatus": "0",
    "menuSort": "1",
    "dataType": "0",
    "searchName": "input.json",
    "menuPath": "/Files/ResultData/Workflow/W202506120003255",
    "trackCrossQcPassFlag": "",
    "stitchedImage": "",
    "menuName": "W202506120003255",
    "linkType": "2"
  }
]
}

def get_auto_fill_parameters(params_meta_data):
    res = []
    for i in params_meta_data["records"]:
        sun_param={}
        for key,value in i.items():
            if key in ["name","omics","menuPath","chipId"] and value != "":
                
                sun_param[key]=value
        res.append(sun_param)
    # print(res)
    return res
from utils import process_data_meatinfo
import json
import asyncio

if __name__ == "__main__":
    # print(get_auto_fill_parameters(auto_fill_parameters_data))
    # data_meatinfo_json = json.dumps(auto_fill_parameters_data,ensure_ascii=False)
    # res = asyncio.run(process_data_meatinfo(data_meatinfo_json))
    # print(res)
    from data_process.data_p import get_data_from_auto_fill_params
    res=get_data_from_auto_fill_params(auto_fill_parameters_data)
    print(res)